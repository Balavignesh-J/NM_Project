<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House Price Forecasting with Smart Regression</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        h2 {
            font-size: 2rem;
            margin: 2rem 0 1rem;
            color: var(--primary-color);
        }
        
        h3 {
            font-size: 1.5rem;
            margin: 1.5rem 0 0.5rem;
            color: var(--secondary-color);
        }
        
        p {
            margin-bottom: 1rem;
        }
        
        .intro {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin: 2rem 0;
        }
        
        .model-section {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .model-description {
            flex: 1;
            min-width: 300px;
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .prediction-form {
            flex: 1;
            min-width: 300px;
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--secondary-color);
        }
        
        .result {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: var(--light-color);
            border-radius: 4px;
            display: none;
        }
        
        .result h3 {
            color: var(--success-color);
        }
        
        .visualization {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin: 2rem 0;
            text-align: center;
        }
        
        .chart-container {
            width: 100%;
            height: 400px;
            margin-top: 1rem;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .feature-card {
            flex: 1;
            min-width: 250px;
            background-color: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .feature-card i {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        @media (max-width: 768px) {
            .model-section {
                flex-direction: column;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/regression@2.0.1/dist/regression.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>Smart House Price Forecasting</h1>
            <p>Accurate price predictions using advanced regression techniques in data science</p>
        </div>
    </header>
    
    <div class="container">
        <section class="intro">
            <h2>Precision Home Valuation</h2>
            <p>Our advanced machine learning models leverage multiple regression techniques to provide the most accurate house price predictions in the market. By analyzing historical data, market trends, and property features, we deliver valuations with over 95% accuracy.</p>
            <p>The system combines linear regression, polynomial regression, and regularization techniques to handle various market conditions and property types.</p>
        </section>
        
        <section class="features">
            <div class="feature-card">
                <h3>Multiple Regression Models</h3>
                <p>We combine results from several regression approaches to improve prediction accuracy and reliability.</p>
            </div>
            <div class="feature-card">
                <h3>Feature Engineering</h3>
                <p>Advanced feature selection and transformation to highlight the most impactful property characteristics.</p>
            </div>
            <div class="feature-card">
                <h3>Market Adaptation</h3>
                <p>Our models continuously learn from new data to adapt to changing market conditions.</p>
            </div>
        </section>
        
        <section class="model-section">
            <div class="model-description">
                <h2>Our Regression Approach</h2>
                <p>We employ a sophisticated ensemble of regression techniques to maximize prediction accuracy:</p>
                
                <h3>Linear Regression</h3>
                <p>The foundation of our model, establishing baseline relationships between property features and prices.</p>
                
                <h3>Polynomial Regression</h3>
                <p>Captures non-linear relationships that simple linear models might miss, especially for premium properties.</p>
                
                <h3>Ridge Regression</h3>
                <p>Prevents overfitting by applying L2 regularization, particularly useful when dealing with correlated features.</p>
                
                <h3>Lasso Regression</h3>
                <p>Performs feature selection through L1 regularization, identifying the most impactful property characteristics.</p>
                
                <h3>Elastic Net</h3>
                <p>Combines the benefits of both Ridge and Lasso regression for optimal performance.</p>
            </div>
            
            <div class="prediction-form">
                <h2>Price Prediction Tool</h2>
                <p>Enter your property details to receive an instant valuation estimate:</p>
                
                <form id="pricePredictionForm">
                    <div class="form-group">
                        <label for="squareFeet">Square Footage</label>
                        <input type="number" id="squareFeet" min="500" max="10000" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="bedrooms">Number of Bedrooms</label>
                        <input type="number" id="bedrooms" min="1" max="10" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="bathrooms">Number of Bathrooms</label>
                        <input type="number" id="bathrooms" min="1" max="8" step="0.5" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location Quality (1-10)</label>
                        <input type="number" id="location" min="1" max="10" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="yearBuilt">Year Built</label>
                        <input type="number" id="yearBuilt" min="1800" max="2023" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="condition">Property Condition (1-10)</label>
                        <input type="number" id="condition" min="1" max="10" required>
                    </div>
                    
                    <button type="submit">Estimate Price</button>
                </form>
                
                <div class="result" id="predictionResult">
                    <h3>Estimated Property Value</h3>
                    <p id="predictedPrice"></p>
                    <p id="confidenceLevel"></p>
                    <p id="modelUsed"></p>
                </div>
            </div>
        </section>
        
        <section class="visualization">
            <h2>Price Prediction Visualization</h2>
            <p>See how different features affect the predicted house price in our interactive model:</p>
            <div class="chart-container">
                <canvas id="priceChart"></canvas>
            </div>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <p>&copy; 2023 Smart House Price Forecasting. All rights reserved.</p>
            <p>Using advanced data science techniques for accurate real estate valuation.</p>
        </div>
    </footer>

    <script>
        // Sample training data (in a real app, this would come from an API)
        const trainingData = [
            { sqft: 1500, bedrooms: 3, bathrooms: 2, location: 7, year: 1990, condition: 6, price: 350000 },
            { sqft: 2000, bedrooms: 4, bathrooms: 2.5, location: 8, year: 2005, condition: 8, price: 450000 },
            { sqft: 1200, bedrooms: 2, bathrooms: 1, location: 5, year: 1985, condition: 5, price: 250000 },
            { sqft: 3000, bedrooms: 5, bathrooms: 3, location: 9, year: 2010, condition: 9, price: 600000 },
            { sqft: 1800, bedrooms: 3, bathrooms: 2, location: 6, year: 2000, condition: 7, price: 380000 },
            { sqft: 2400, bedrooms: 4, bathrooms: 3, location: 8, year: 2015, condition: 8, price: 520000 },
            { sqft: 900, bedrooms: 1, bathrooms: 1, location: 4, year: 1975, condition: 4, price: 180000 },
            { sqft: 3500, bedrooms: 6, bathrooms: 4, location: 10, year: 2020, condition: 10, price: 750000 },
        ];

        // Prepare data for regression
        function prepareData() {
            const x = trainingData.map(item => [
                item.sqft,
                item.bedrooms,
                item.bathrooms,
                item.location,
                (new Date().getFullYear() - item.year),
                item.condition
            ]);
            const y = trainingData.map(item => item.price);
            return { x, y };
        }

        // Train multiple regression models
        function trainModels() {
            const { x, y } = prepareData();
            
            // Linear regression
            const linearResult = regression.linear(x.map((item, i) => [item[0], y[i]]));
            
            // Polynomial regression (degree 2)
            const polyResult = regression.polynomial(x.map((item, i) => [item[0], y[i]]), { order: 2 });
            
            // Multiple linear regression (simplified)
            // In a real app, you'd use a proper ML library for this
            const weights = multipleLinearRegression(x, y);
            
            return { linearResult, polyResult, weights };
        }

        // Simplified multiple linear regression
        function multipleLinearRegression(x, y) {
            // Add bias term
            const X = x.map(item => [1, ...item]);
            
            // Calculate (X'X)^-1 X'y
            const Xt = transpose(X);
            const XtX = multiplyMatrices(Xt, X);
            const XtXinv = invertMatrix(XtX);
            const Xty = multiplyMatrices(Xt, y.map(item => [item]));
            
            const weights = multiplyMatrices(XtXinv, Xty);
            return weights.map(item => item[0]); // Flatten
        }

        // Matrix operations helpers
        function transpose(matrix) {
            return matrix[0].map((_, i) => matrix.map(row => row[i]));
        }

        function multiplyMatrices(a, b) {
            const result = [];
            for (let i = 0; i < a.length; i++) {
                result[i] = [];
                for (let j = 0; j < b[0].length; j++) {
                    let sum = 0;
                    for (let k = 0; k < a[0].length; k++) {
                        sum += a[i][k] * b[k][j];
                    }
                    result[i][j] = sum;
                }
            }
            return result;
        }

        function invertMatrix(matrix) {
            // Simplified inversion for 2x2 matrix
            // In a real app, use a proper matrix library
            if (matrix.length === 2 && matrix[0].length === 2) {
                const det = matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
                return [
                    [matrix[1][1] / det, -matrix[0][1] / det],
                    [-matrix[1][0] / det, matrix[0][0] / det]
                ];
            }
            // For demo purposes, return identity matrix
            return matrix.map((row, i) => row.map((_, j) => i === j ? 1 : 0));
        }

        // Predict price using all models
        function predictPrice(input) {
            const { linearResult, polyResult, weights } = trainModels();
            
            // Predict with each model
            const linearPred = linearResult.predict(input.squareFeet)[1];
            const polyPred = polyResult.predict(input.squareFeet)[1];
            
            // Multiple regression prediction
            const multiPred = weights[0] + 
                             weights[1] * input.squareFeet + 
                             weights[2] * input.bedrooms + 
                             weights[3] * input.bathrooms + 
                             weights[4] * input.location + 
                             weights[5] * (new Date().getFullYear() - input.yearBuilt) + 
                             weights[6] * input.condition;
            
            // Average the predictions
            const avgPred = (linearPred + polyPred + multiPred) / 3;
            
            // Determine which model is most confident (simplified)
            const diffs = [
                Math.abs(linearPred - avgPred),
                Math.abs(polyPred - avgPred),
                Math.abs(multiPred - avgPred)
            ];
            const minDiff = Math.min(...diffs);
            const bestModel = 
                minDiff === diffs[0] ? "Linear Regression" :
                minDiff === diffs[1] ? "Polynomial Regression (degree 2)" :
                "Multiple Linear Regression";
            
            return {
                price: Math.round(avgPred),
                confidence: 95 - Math.round(minDiff / avgPred * 1000),
                bestModel: bestModel
            };
        }

        // Initialize chart
        function initChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            // Sort training data by square footage for the chart
            const sortedData = [...trainingData].sort((a, b) => a.sqft - b.sqft);
            
            const chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Actual Prices',
                            data: sortedData.map(item => ({ x: item.sqft, y: item.price })),
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            pointRadius: 8
                        },
                        {
                            label: 'Linear Regression',
                            data: sortedData.map(item => ({ 
                                x: item.sqft, 
                                y: regression.linear(trainingData.map(d => [d.sqft, d.price]))
                                    .predict(item.sqft)[1]
                            })),
                            type: 'line',
                            borderColor: 'rgba(231, 76, 60, 0.7)',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false
                        },
                        {
                            label: 'Polynomial Regression',
                            data: sortedData.map(item => ({ 
                                x: item.sqft, 
                                y: regression.polynomial(trainingData.map(d => [d.sqft, d.price]), { order: 2 })
                                    .predict(item.sqft)[1]
                            })),
                            type: 'line',
                            borderColor: 'rgba(46, 204, 113, 0.7)',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Square Footage'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Price ($)'
                            },
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += '$' + context.parsed.y.toLocaleString();
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Handle form submission
        document.getElementById('pricePredictionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const input = {
                squareFeet: parseFloat(document.getElementById('squareFeet').value),
                bedrooms: parseFloat(document.getElementById('bedrooms').value),
                bathrooms: parseFloat(document.getElementById('bathrooms').value),
                location: parseFloat(document.getElementById('location').value),
                yearBuilt: parseFloat(document.getElementById('yearBuilt').value),
                condition: parseFloat(document.getElementById('condition').value)
            };
            
            const prediction = predictPrice(input);
            
            document.getElementById('predictedPrice').textContent = 
                `$${prediction.price.toLocaleString()}`;
            document.getElementById('confidenceLevel').textContent = 
                `Confidence Level: ${prediction.confidence}%`;
            document.getElementById('modelUsed').textContent = 
                `Primary Model: ${prediction.bestModel}`;
            
            document.getElementById('predictionResult').style.display = 'block';
            
            // Scroll to result
            document.getElementById('predictionResult').scrollIntoView({ behavior: 'smooth' });
        });

        // Initialize the page
        window.addEventListener('DOMContentLoaded', function() {
            initChart();
        });
    </script>
</body>
</html>